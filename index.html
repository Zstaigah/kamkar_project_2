<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSINT Lab - Modular Platform</title>
    
    <!-- Enhanced meta tags -->
    <meta name="description" content="Educational OSINT training platform with realistic scrappable personas">
    <meta name="keywords" content="OSINT, cybersecurity, training, personas, scraping">
    <meta name="author" content="zstaigah">
    <meta property="og:title" content="OSINT Lab - Modular Platform">
    <meta property="og:description" content="Practice OSINT techniques on realistic synthetic data">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        nav {
            padding: 20px;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #764ba2;
            margin-bottom: 20px;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-menu li {
            cursor: pointer;
            padding: 10px 20px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 14px;
        }

        .nav-menu li:hover, .nav-menu li.active {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            background: linear-gradient(45deg, #764ba2, #667eea);
        }

        .content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #28a745, #20c997);
        }

        .btn-danger {
            background: linear-gradient(45deg, #dc3545, #fd7e14);
        }

        .profile-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .profile-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            transition: transform 0.3s ease;
        }

        .profile-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .profile-pic {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #667eea;
        }

        .profile-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .profile-title {
            color: #667eea;
            font-size: 14px;
        }

        .profile-meta {
            color: #666;
            font-size: 12px;
            margin-top: 5px;
        }

        .profile-links {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .link-btn {
            padding: 6px 12px;
            font-size: 12px;
            border-radius: 15px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            margin: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .close-btn {
            float: right;
            font-size: 24px;
            cursor: pointer;
            color: #999;
            margin-top: -10px;
        }

        .close-btn:hover {
            color: #333;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .detail-section {
            background: #f8f9ff;
            padding: 15px;
            border-radius: 10px;
        }

        .detail-section h4 {
            color: #764ba2;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .detail-section p {
            margin-bottom: 4px;
            font-size: 13px;
        }

        .hash-display {
            background: #2d3748;
            color: #00ff00;
            padding: 10px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            word-break: break-all;
            margin: 10px 0;
        }

        .scraping-info {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }

        .endpoint-list {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .endpoint-list code {
            background: #fff;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 12px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .nav-menu {
                flex-direction: column;
                gap: 10px;
            }
            
            .profile-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                margin: 10px;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <nav>
                <div class="logo">üîç OSINT Lab - Modular Platform</div>
                <ul class="nav-menu">
                    <li onclick="showPage('dashboard')" class="active">Dashboard</li>
                    <li onclick="showPage('directory')">Profile Directory</li>
                    <li onclick="showPage('social')">Social Media</li>
                    <li onclick="showPage('company')">Company Profiles</li>
                    <li onclick="showPage('scraping')">Scraping Guide</li>
                    <li onclick="showPage('admin')">Admin Panel</li>
                </ul>
            </nav>
        </header>

        <div class="content">
            <!-- Dashboard -->
            <div id="dashboard" class="page active">
                <h1>OSINT Training Dashboard</h1>
                
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-number" id="total-profiles">0</div>
                        <div class="stat-label">Total Profiles</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-companies">0</div>
                        <div class="stat-label">Companies</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-endpoints">12</div>
                        <div class="stat-label">Scraping Endpoints</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="last-generated">Never</div>
                        <div class="stat-label">Last Generated</div>
                    </div>
                </div>

                <div class="scraping-info">
                    <h3>üéØ Training Objectives</h3>
                    <p>This modular platform simulates real-world OSINT targets with:</p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Individual profile pages with unique URLs</li>
                        <li>Company directory with employee listings</li>
                        <li>Social media-style profiles</li>
                        <li>Realistic data relationships and cross-references</li>
                        <li>Multiple scraping endpoints and data formats</li>
                    </ul>
                </div>

                <button class="btn" onclick="generateDataSet()">üé≤ Generate New Dataset</button>
                <button class="btn btn-secondary" onclick="exportAllData()">üì¶ Export All Data</button>
                <button class="btn btn-danger" onclick="clearAllData()">üóëÔ∏è Clear Database</button>
            </div>

            <!-- Profile Directory -->
            <div id="directory" class="page">
                <h1>üë• Profile Directory</h1>
                <p>Individual profiles with detailed personal information - perfect for person-specific OSINT practice.</p>
                
                <div id="profiles-container" class="profile-grid">
                    <p style="grid-column: 1 / -1; text-align: center; color: #666;">No profiles generated yet. Go to Dashboard to generate data.</p>
                </div>
            </div>

            <!-- Social Media Profiles -->
            <div id="social" class="page">
                <h1>üì± Social Media Profiles</h1>
                <p>Social network-style profiles with connections, posts, and activity data.</p>
                
                <div id="social-container" class="profile-grid">
                    <p style="grid-column: 1 / -1; text-align: center; color: #666;">No social profiles available yet.</p>
                </div>
            </div>

            <!-- Company Profiles -->
            <div id="company" class="page">
                <h1>üè¢ Company Directory</h1>
                <p>Corporate profiles with employee listings, organizational charts, and business data.</p>
                
                <div id="company-container">
                    <p style="text-align: center; color: #666;">No company data available yet.</p>
                </div>
            </div>

            <!-- Scraping Guide -->
            <div id="scraping" class="page">
                <h1>üîß Scraping Guide & Endpoints</h1>
                
                <div class="endpoint-list">
                    <h3>Individual Profile Endpoints</h3>
                    <p><code>/profiles/{person-id}</code> - Full profile data</p>
                    <p><code>/profiles/{person-id}/contact</code> - Contact information</p>
                    <p><code>/profiles/{person-id}/social</code> - Social media links</p>
                    <p><code>/profiles/{person-id}/employment</code> - Work history</p>
                </div>

                <div class="endpoint-list">
                    <h3>Company Endpoints</h3>
                    <p><code>/companies/{company-id}</code> - Company profile</p>
                    <p><code>/companies/{company-id}/employees</code> - Employee directory</p>
                    <p><code>/companies/{company-id}/departments</code> - Organizational structure</p>
                </div>

                <div class="endpoint-list">
                    <h3>Search & Discovery</h3>
                    <p><code>/search/people?q={query}</code> - People search</p>
                    <p><code>/search/companies?q={query}</code> - Company search</p>
                    <p><code>/directory/all</code> - Complete directory dump</p>
                </div>

                <div class="endpoint-list">
                    <h3>Key CSS Selectors for Scraping</h3>
                    <p><code>.person-profile</code> - Main profile containers</p>
                    <p><code>[data-person-id]</code> - Profile identification</p>
                    <p><code>.contact-info</code> - Contact details</p>
                    <p><code>.employment-data</code> - Job information</p>
                    <p><code>.social-links</code> - Social media profiles</p>
                    <p><code>.password-hash</code> - Security analysis data</p>
                </div>
            </div>

            <!-- Admin Panel -->
            <div id="admin" class="page">
                <h1>‚öôÔ∏è Admin Panel</h1>
                
                <div class="endpoint-list">
                    <h3>Data Generation Controls</h3>
                    <button class="btn" onclick="generateIndividuals(10)">Generate 10 Individuals</button>
                    <button class="btn" onclick="generateCompanies(5)">Generate 5 Companies</button>
                    <button class="btn" onclick="generateSocialProfiles()">Generate Social Profiles</button>
                    <button class="btn" onclick="linkEmployeeData()">Link Employee-Company Data</button>
                </div>

                <div class="endpoint-list">
                    <h3>Export Options</h3>
                    <button class="btn btn-secondary" onclick="exportJSON()">üìÑ JSON Export</button>
                    <button class="btn btn-secondary" onclick="exportCSV()">üìä CSV Export</button>
                    <button class="btn btn-secondary" onclick="exportXML()">üîñ XML Export</button>
                    <button class="btn btn-secondary" onclick="exportSitemap()">üó∫Ô∏è Generate Sitemap</button>
                </div>

                <div class="endpoint-list">
                    <h3>Debug Tools</h3>
                    <button class="btn" onclick="showDebugInfo()">üîç Debug Info</button>
                    <button class="btn" onclick="validateData()">‚úÖ Validate Data</button>
                    <button class="btn" onclick="generateSampleQueries()">üìù Sample Queries</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for detailed profile view -->
    <div id="profile-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <div id="modal-content-body"></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script>
        // Global data storage
        let database = {
            profiles: [],
            companies: [],
            socialProfiles: [],
            relationships: []
        };

        // Sample data arrays
        const sampleData = {
            firstNames: ['James', 'Mary', 'John', 'Patricia', 'Robert', 'Jennifer', 'Michael', 'Linda', 'David', 'Elizabeth', 'William', 'Barbara', 'Richard', 'Susan', 'Joseph', 'Jessica', 'Thomas', 'Sarah', 'Christopher', 'Karen', 'Daniel', 'Nancy', 'Matthew', 'Lisa', 'Anthony', 'Betty', 'Mark', 'Helen', 'Donald', 'Sandra'],
            
            lastNames: ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia', 'Miller', 'Davis', 'Rodriguez', 'Martinez', 'Hernandez', 'Lopez', 'Gonzalez', 'Wilson', 'Anderson', 'Thomas', 'Taylor', 'Moore', 'Jackson', 'Martin'],
            
            companies: ['TechCorp Solutions', 'Global Dynamics Inc', 'InnovateNow LLC', 'DataFlow Systems', 'CloudFirst Technologies', 'NextGen Industries', 'ProActive Services', 'SmartTech Innovations', 'FutureWorks Ltd', 'DigitalEdge Corp'],
            
            jobTitles: ['Software Engineer', 'Marketing Manager', 'Sales Representative', 'Project Manager', 'Data Analyst', 'HR Specialist', 'Financial Advisor', 'Operations Director', 'Product Manager', 'Business Analyst'],
            
            cities: ['New York', 'Los Angeles', 'Chicago', 'Houston', 'Phoenix', 'Philadelphia', 'San Antonio', 'San Diego', 'Dallas', 'San Jose'],
            
            universities: ['MIT', 'Stanford University', 'Harvard University', 'UC Berkeley', 'Carnegie Mellon', 'University of Chicago', 'Northwestern', 'Yale University', 'Princeton', 'Columbia University'],
            
            domains: ['gmail.com', 'yahoo.com', 'hotmail.com', 'outlook.com', 'icloud.com', 'protonmail.com'],
            
            socialPlatforms: ['LinkedIn', 'Twitter', 'Facebook', 'Instagram', 'GitHub', 'Reddit']
        };

        // Utility functions
        function getRandomElement(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function generateRandomNumber(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function generateID() {
            return 'ID-' + Date.now().toString(36) + '-' + Math.random().toString(36).substr(2, 5);
        }

        function generatePhoneNumber() {
            return `+1-${generateRandomNumber(200, 999)}-${generateRandomNumber(200, 999)}-${generateRandomNumber(1000, 9999)}`;
        }

        function generateEmail(firstName, lastName, company = null) {
            const formats = [
                `${firstName.toLowerCase()}.${lastName.toLowerCase()}`,
                `${firstName.toLowerCase()}${lastName.toLowerCase()}`,
                `${firstName.charAt(0).toLowerCase()}${lastName.toLowerCase()}`,
                `${firstName.toLowerCase()}${generateRandomNumber(10, 99)}`
            ];
            
            let domain;
            if (company && Math.random() > 0.3) {
                domain = company.toLowerCase().replace(/[^a-z0-9]/g, '') + '.com';
            } else {
                domain = getRandomElement(sampleData.domains);
            }
            
            return `${getRandomElement(formats)}@${domain}`;
        }

        function generatePassword(persona) {
            const components = [
                persona.firstName,
                persona.lastName,
                persona.birthYear.toString(),
                persona.city,
                persona.company?.split(' ')[0] || 'work'
            ];
            
            return getRandomElement(components) + getRandomElement(components) + generateRandomNumber(10, 99);
        }

        function hashPassword(password) {
            try {
                return CryptoJS.SHA512(password).toString();
            } catch (e) {
                return 'hash_generation_failed';
            }
        }

        // Navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.querySelectorAll('.nav-menu li').forEach(item => item.classList.remove('active'));
            
            document.getElementById(pageId).classList.add('active');
            event.target.classList.add('active');
            
            // Update page-specific content
            if (pageId === 'directory') {
                renderProfiles();
            } else if (pageId === 'social') {
                renderSocialProfiles();
            } else if (pageId === 'company') {
                renderCompanies();
            } else if (pageId === 'dashboard') {
                updateStats();
            }
        }

        // Data generation functions
        function generateProfile() {
            const firstName = getRandomElement(sampleData.firstNames);
            const lastName = getRandomElement(sampleData.lastNames);
            const birthYear = generateRandomNumber(1970, 2000);
            const company = getRandomElement(sampleData.companies);
            
            const profile = {
                id: generateID(),
                firstName: firstName,
                lastName: lastName,
                fullName: `${firstName} ${lastName}`,
                email: generateEmail(firstName, lastName, company),
                phone: generatePhoneNumber(),
                birthdate: `${generateRandomNumber(1, 12)}/${generateRandomNumber(1, 28)}/${birthYear}`,
                birthYear: birthYear,
                age: 2025 - birthYear,
                jobTitle: getRandomElement(sampleData.jobTitles),
                company: company,
                city: getRandomElement(sampleData.cities),
                university: getRandomElement(sampleData.universities),
                graduationYear: generateRandomNumber(1990, 2020),
                profilePic: `https://randomuser.me/api/portraits/${Math.random() > 0.5 ? 'men' : 'women'}/${generateRandomNumber(1, 99)}.jpg`,
                linkedinConnections: generateRandomNumber(50, 500),
                socialProfiles: {
                    linkedin: `https://linkedin.com/in/${firstName.toLowerCase()}-${lastName.toLowerCase()}`,
                    twitter: `https://twitter.com/${firstName.toLowerCase()}${lastName.toLowerCase()}`,
                    github: Math.random() > 0.6 ? `https://github.com/${firstName.toLowerCase()}${lastName.toLowerCase()}` : null
                },
                generatedAt: new Date().toISOString(),
                url: `/profiles/${generateID()}`
            };

            const password = generatePassword(profile);
            profile.passwordHint = password;
            profile.passwordHash = hashPassword(password);

            return profile;
        }

        function generateCompanyProfile() {
            const companyName = getRandomElement(sampleData.companies);
            return {
                id: generateID(),
                name: companyName,
                industry: getRandomElement(['Technology', 'Finance', 'Healthcare', 'Manufacturing', 'Consulting']),
                size: getRandomElement(['10-50', '51-200', '201-1000', '1000+']),
                location: getRandomElement(sampleData.cities),
                website: `https://${companyName.toLowerCase().replace(/[^a-z0-9]/g, '')}.com`,
                employees: [],
                departments: ['Engineering', 'Sales', 'Marketing', 'HR', 'Finance'],
                generatedAt: new Date().toISOString(),
                url: `/companies/${generateID()}`
            };
        }

        function generateDataSet() {
            database.profiles = [];
            database.companies = [];
            database.socialProfiles = [];
            
            // Generate companies first
            for (let i = 0; i < 5; i++) {
                database.companies.push(generateCompanyProfile());
            }
            
            // Generate profiles and assign to companies
            for (let i = 0; i < 20; i++) {
                const profile = generateProfile();
                profile.company = getRandomElement(database.companies).name;
                database.profiles.push(profile);
                
                // Generate social profile
                database.socialProfiles.push({
                    id: profile.id,
                    personId: profile.id,
                    posts: generateRandomNumber(10, 100),
                    followers: generateRandomNumber(50, 1000),
                    following: generateRandomNumber(30, 500),
                    lastActive: new Date(Date.now() - generateRandomNumber(1, 30) * 24 * 60 * 60 * 1000).toISOString()
                });
            }
            
            updateStats();
            alert(`Generated ${database.profiles.length} profiles and ${database.companies.length} companies!`);
            
            // Auto-render if on relevant pages
            const currentPage = document.querySelector('.page.active').id;
            if (currentPage === 'directory') renderProfiles();
            if (currentPage === 'social') renderSocialProfiles();
            if (currentPage === 'company') renderCompanies();
        }

        function renderProfiles() {
            const container = document.getElementById('profiles-container');
            
            if (database.profiles.length === 0) {
                container.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: #666;">No profiles generated yet. Go to Dashboard to generate data.</p>';
                return;
            }

            container.innerHTML = database.profiles.map(profile => `
                <div class="profile-card person-profile" 
                     data-person-id="${profile.id}"
                     data-full-name="${profile.fullName}"
                     data-email="${profile.email}"
                     data-company="${profile.company}"
                     data-city="${profile.city}"
                     data-url="${profile.url}">
                     
                    <div class="profile-header">
                        <img src="${profile.profilePic}" 
                             alt="${profile.fullName}" 
                             class="profile-pic"
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIGZpbGw9IiM2NjdlZWEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjgiIHI9IjQiLz48cGF0aCBkPSJNMTIgMTRjLTQgMC04IDItOCA0djJoMTZ2LTJjMC0yLTQtNC04LTR6Ii8+PC9zdmc+';">
                        <div>
                            <div class="profile-name">${profile.fullName}</div>
                            <div class="profile-title">${profile.jobTitle}</div>
                            <div class="profile-meta">${profile.company} ‚Ä¢ ${profile.city}</div>
                        </div>
                    </div>
                    
                    <div class="contact-info" style="display: none;">
                        <div class="email">${profile.email}</div>
                        <div class="phone">${profile.phone}</div>
                        <div class="university">${profile.university}</div>
                        <div class="age">${profile.age}</div>
                        <div class="linkedin-connections">${profile.linkedinConnections}</div>
                    </div>
                    
                    <div class="profile-links">
                        <button class="btn link-btn" onclick="viewProfile('${profile.id}')">üë§ View Profile</button>
                        <button class="btn link-btn" onclick="viewEmployment('${profile.id}')">üíº Employment</button>
                        <button class="btn link-btn" onclick="viewSocial('${profile.id}')">üì± Social</button>
                        <button class="btn link-btn" onclick="viewSecurity('${profile.id}')">üîê Security</button>
                    </div>
                </div>
            `).join('');
        }

        function renderSocialProfiles() {
            const container = document.getElementById('social-container');
            
            if (database.socialProfiles.length === 0) {
                container.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: #666;">No social profiles available yet.</p>';
                return;
            }

            container.innerHTML = database.socialProfiles.map(social => {
                const profile = database.profiles.find(p => p.id === social.personId);
                if (!profile) return '';
                
                return `
                    <div class="profile-card social-profile" 
                         data-person-id="${profile.id}"
                         data-social-platform="multi"
                         data-followers="${social.followers}"
                         data-posts="${social.posts}"
                         data-last-active="${social.lastActive}">
                         
                        <div class="profile-header">
                            <img src="${profile.profilePic}" 
                                 alt="${profile.fullName}" 
                                 class="profile-pic"
                                 onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIGZpbGw9IiM2NjdlZWEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjgiIHI9IjQiLz48cGF0aCBkPSJNMTIgMTRjLTQgMC04IDItOCA0djJoMTZ2LTJjMC0yLTQtNC04LTR6Ii8+PC9zdmc+';">
                            <div>
                                <div class="profile-name">@${profile.firstName.toLowerCase()}${profile.lastName.toLowerCase()}</div>
                                <div class="profile-title">${profile.fullName}</div>
                                <div class="profile-meta">${social.followers} followers ‚Ä¢ ${social.posts} posts</div>
                            </div>
                        </div>
                        
                        <div class="social-links">
                            <div style="font-size: 12px; color: #666; margin-bottom: 10px;">
                                üìÖ Last active: ${new Date(social.lastActive).toLocaleDateString()}
                            </div>
                            ${profile.socialProfiles.linkedin ? `<a href="${profile.socialProfiles.linkedin}" class="btn link-btn">LinkedIn</a>` : ''}
                            ${profile.socialProfiles.twitter ? `<a href="${profile.socialProfiles.twitter}" class="btn link-btn">Twitter</a>` : ''}
                            ${profile.socialProfiles.github ? `<a href="${profile.socialProfiles.github}" class="btn link-btn">GitHub</a>` : ''}
                        </div>
                        
                        <div class="profile-links">
                            <button class="btn link-btn" onclick="viewProfile('${profile.id}')">üë§ Full Profile</button>
                            <button class="btn link-btn" onclick="viewSocialDetails('${profile.id}')">üìä Analytics</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderCompanies() {
            const container = document.getElementById('company-container');
            
            if (database.companies.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">No company data available yet.</p>';
                return;
            }

            container.innerHTML = `
                <div class="profile-grid">
                    ${database.companies.map(company => {
                        const employees = database.profiles.filter(p => p.company === company.name);
                        
                        return `
                            <div class="profile-card company-profile" 
                                 data-company-id="${company.id}"
                                 data-company-name="${company.name}"
                                 data-industry="${company.industry}"
                                 data-size="${company.size}"
                                 data-employee-count="${employees.length}"
                                 data-url="${company.url}">
                                 
                                <div class="profile-header">
                                    <div style="width: 60px; height: 60px; background: linear-gradient(45deg, #667eea, #764ba2); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 18px;">
                                        ${company.name.charAt(0)}
                                    </div>
                                    <div>
                                        <div class="profile-name">${company.name}</div>
                                        <div class="profile-title">${company.industry}</div>
                                        <div class="profile-meta">${company.location} ‚Ä¢ ${employees.length} employees</div>
                                    </div>
                                </div>
                                
                                <div class="employment-data" style="display: none;">
                                    <div class="company-size">${company.size}</div>
                                    <div class="company-website">${company.website}</div>
                                    <div class="company-departments">${company.departments.join(',')}</div>
                                </div>
                                
                                <div style="margin: 15px 0;">
                                    <h4 style="color: #764ba2; font-size: 14px; margin-bottom: 8px;">Recent Employees:</h4>
                                    ${employees.slice(0, 3).map(emp => 
                                        `<div style="font-size: 12px; margin-bottom: 3px;">‚Ä¢ ${emp.fullName} - ${emp.jobTitle}</div>`
                                    ).join('')}
                                    ${employees.length > 3 ? `<div style="font-size: 12px; color: #666;">... and ${employees.length - 3} more</div>` : ''}
                                </div>
                                
                                <div class="profile-links">
                                    <button class="btn link-btn" onclick="viewCompany('${company.id}')">üè¢ Company Info</button>
                                    <button class="btn link-btn" onclick="viewEmployees('${company.id}')">üë• All Employees</button>
                                    <button class="btn link-btn" onclick="viewOrgChart('${company.id}')">üìä Org Chart</button>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        // Modal functions for detailed views
        function viewProfile(profileId) {
            const profile = database.profiles.find(p => p.id === profileId);
            if (!profile) return;
            
            const modalBody = document.getElementById('modal-content-body');
            modalBody.innerHTML = `
                <h2>${profile.fullName} - Complete Profile</h2>
                
                <div class="detail-grid">
                    <div class="detail-section">
                        <h4>üìß Contact Information</h4>
                        <p><strong>Email:</strong> <span class="contact-email">${profile.email}</span></p>
                        <p><strong>Phone:</strong> <span class="contact-phone">${profile.phone}</span></p>
                        <p><strong>Location:</strong> ${profile.city}</p>
                    </div>
                    
                    <div class="detail-section">
                        <h4>üë§ Personal Details</h4>
                        <p><strong>Age:</strong> ${profile.age} years old</p>
                        <p><strong>Birthday:</strong> ${profile.birthdate}</p>
                        <p><strong>University:</strong> ${profile.university}</p>
                        <p><strong>Graduation:</strong> ${profile.graduationYear}</p>
                    </div>
                    
                    <div class="detail-section">
                        <h4>üíº Professional</h4>
                        <p><strong>Position:</strong> ${profile.jobTitle}</p>
                        <p><strong>Company:</strong> ${profile.company}</p>
                        <p><strong>LinkedIn:</strong> ${profile.linkedinConnections} connections</p>
                    </div>
                    
                    <div class="detail-section">
                        <h4>üì± Social Media</h4>
                        ${profile.socialProfiles.linkedin ? `<p><strong>LinkedIn:</strong> <a href="${profile.socialProfiles.linkedin}" target="_blank">View Profile</a></p>` : ''}
                        ${profile.socialProfiles.twitter ? `<p><strong>Twitter:</strong> <a href="${profile.socialProfiles.twitter}" target="_blank">View Profile</a></p>` : ''}
                        ${profile.socialProfiles.github ? `<p><strong>GitHub:</strong> <a href="${profile.socialProfiles.github}" target="_blank">View Profile</a></p>` : ''}
                    </div>
                </div>
                
                <div class="detail-section">
                    <h4>üîê Security Analysis Data</h4>
                    <p><strong>Password Hint:</strong> <span class="password-hint">${profile.passwordHint}</span></p>
                    <div class="hash-display password-hash">${profile.passwordHash}</div>
                    <p style="font-size: 12px; color: #666;">This hash can be used for educational password cracking exercises.</p>
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="btn" onclick="exportProfile('${profile.id}')">üìÑ Export Profile Data</button>
                    <button class="btn btn-secondary" onclick="generateProfileURL('${profile.id}')">üîó Generate Scraping URL</button>
                </div>
            `;
            
            document.getElementById('profile-modal').classList.add('active');
        }

        function viewEmployees(companyId) {
            const company = database.companies.find(c => c.id === companyId);
            const employees = database.profiles.filter(p => p.company === company.name);
            
            const modalBody = document.getElementById('modal-content-body');
            modalBody.innerHTML = `
                <h2>${company.name} - Employee Directory</h2>
                
                <div class="stats" style="margin: 20px 0;">
                    <div class="stat-card">
                        <div class="stat-number">${employees.length}</div>
                        <div class="stat-label">Total Employees</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${[...new Set(employees.map(e => e.jobTitle))].length}</div>
                        <div class="stat-label">Unique Roles</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${company.departments.length}</div>
                        <div class="stat-label">Departments</div>
                    </div>
                </div>
                
                <div class="profile-grid">
                    ${employees.map(employee => `
                        <div class="profile-card" data-employee-id="${employee.id}">
                            <div class="profile-header">
                                <img src="${employee.profilePic}" 
                                     alt="${employee.fullName}" 
                                     class="profile-pic"
                                     style="width: 40px; height: 40px;">
                                <div>
                                    <div class="profile-name" style="font-size: 16px;">${employee.fullName}</div>
                                    <div class="profile-title" style="font-size: 13px;">${employee.jobTitle}</div>
                                    <div class="profile-meta" style="font-size: 11px;">${employee.email}</div>
                                </div>
                            </div>
                            <button class="btn link-btn" onclick="viewProfile('${employee.id}')">View Details</button>
                        </div>
                    `).join('')}
                </div>
            `;
            
            document.getElementById('profile-modal').classList.add('active');
        }

        function viewSecurity(profileId) {
            const profile = database.profiles.find(p => p.id === profileId);
            
            const modalBody = document.getElementById('modal-content-body');
            modalBody.innerHTML = `
                <h2>üîê Security Analysis - ${profile.fullName}</h2>
                
                <div class="detail-section">
                    <h4>Password Analysis</h4>
                    <p><strong>Generated Password:</strong> <code>${profile.passwordHint}</code></p>
                    <p><strong>Algorithm:</strong> SHA-512</p>
                    <div class="hash-display">${profile.passwordHash}</div>
                </div>
                
                <div class="detail-section">
                    <h4>OSINT Attack Vectors</h4>
                    <p>‚Ä¢ <strong>Email enumeration:</strong> ${profile.email}</p>
                    <p>‚Ä¢ <strong>Social media profiles:</strong> Multiple platforms identified</p>
                    <p>‚Ä¢ <strong>Company association:</strong> ${profile.company}</p>
                    <p>‚Ä¢ <strong>Location data:</strong> ${profile.city}</p>
                    <p>‚Ä¢ <strong>Educational background:</strong> ${profile.university}</p>
                </div>
                
                <div class="detail-section">
                    <h4>Recommended Security Training</h4>
                    <p>‚Ä¢ Password complexity and uniqueness</p>
                    <p>‚Ä¢ Social media privacy settings</p>
                    <p>‚Ä¢ Information disclosure awareness</p>
                    <p>‚Ä¢ Phishing and social engineering protection</p>
                </div>
            `;
            
            document.getElementById('profile-modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('profile-modal').classList.remove('active');
        }

        // Admin functions
        function generateIndividuals(count) {
            for (let i = 0; i < count; i++) {
                database.profiles.push(generateProfile());
            }
            updateStats();
            alert(`Generated ${count} new profiles!`);
        }

        function generateCompanies(count) {
            for (let i = 0; i < count; i++) {
                database.companies.push(generateCompanyProfile());
            }
            updateStats();
            alert(`Generated ${count} new companies!`);
        }

        function linkEmployeeData() {
            // Randomly assign employees to companies
            database.profiles.forEach(profile => {
                if (database.companies.length > 0) {
                    profile.company = getRandomElement(database.companies).name;
                }
            });
            alert('Employee-company relationships updated!');
        }

        function updateStats() {
            document.getElementById('total-profiles').textContent = database.profiles.length;
            document.getElementById('total-companies').textContent = database.companies.length;
            document.getElementById('last-generated').textContent = 
                database.profiles.length > 0 ? new Date().toLocaleDateString() : 'Never';
        }

        // Export functions
        function exportJSON() {
            const exportData = {
                metadata: {
                    exportedAt: new Date().toISOString(),
                    totalProfiles: database.profiles.length,
                    totalCompanies: database.companies.length,
                    format: 'OSINT_Lab_Modular_Export_v1.0'
                },
                data: database
            };
            
            downloadFile(JSON.stringify(exportData, null, 2), 'osint-lab-data.json', 'application/json');
        }

        function exportCSV() {
            const headers = ['ID', 'FullName', 'Email', 'Phone', 'Company', 'JobTitle', 'City', 'Age', 'University', 'LinkedInConnections', 'PasswordHash', 'ProfileURL'];
            const csvContent = [
                headers.join(','),
                ...database.profiles.map(p => [
                    p.id, `"${p.fullName}"`, `"${p.email}"`, `"${p.phone}"`, `"${p.company}"`, 
                    `"${p.jobTitle}"`, `"${p.city}"`, p.age, `"${p.university}"`, 
                    p.linkedinConnections, `"${p.passwordHash}"`, `"${p.url}"`
                ].join(','))
            ].join('\n');
            
            downloadFile(csvContent, 'osint-lab-profiles.csv', 'text/csv');
        }

        function exportSitemap() {
            const sitemap = `<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <url><loc>https://osint-lab.local/</loc><changefreq>daily</changefreq></url>
    <url><loc>https://osint-lab.local/directory</loc><changefreq>daily</changefreq></url>
    <url><loc>https://osint-lab.local/companies</loc><changefreq>weekly</changefreq></url>
    ${database.profiles.map(p => `<url><loc>https://osint-lab.local${p.url}</loc><changefreq>monthly</changefreq></url>`).join('\n    ')}
    ${database.companies.map(c => `<url><loc>https://osint-lab.local${c.url}</loc><changefreq>monthly</changefreq></url>`).join('\n    ')}
</urlset>`;
            
            downloadFile(sitemap, 'osint-lab-sitemap.xml', 'application/xml');
        }

        function downloadFile(content, filename, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function showDebugInfo() {
            const debugInfo = {
                database: {
                    profiles: database.profiles.length,
                    companies: database.companies.length,
                    socialProfiles: database.socialProfiles.length
                },
                scraping: {
                    totalElements: document.querySelectorAll('[data-person-id]').length,
                    profileCards: document.querySelectorAll('.person-profile').length,
                    companyCards: document.querySelectorAll('.company-profile').length,
                    contactElements: document.querySelectorAll('.contact-info').length
                },
                endpoints: {
                    profiles: database.profiles.map(p => p.url),
                    companies: database.companies.map(c => c.url)
                }
            };
            
            console.log('OSINT Lab Debug Information:', debugInfo);
            alert('Debug information logged to console (F12). Check for scraping endpoints and data structure.');
        }

        function clearAllData() {
            if (confirm('This will clear all generated data. Are you sure?')) {
                database = { profiles: [], companies: [], socialProfiles: [], relationships: [] };
                updateStats();
                
                // Clear all displays
                document.getElementById('profiles-container').innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: #666;">No profiles generated yet.</p>';
                document.getElementById('social-container').innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: #666;">No social profiles available yet.</p>';
                document.getElementById('company-container').innerHTML = '<p style="text-align: center; color: #666;">No company data available yet.</p>';
                
                alert('All data cleared successfully!');
            }
        }

        function exportAllData() {
            if (database.profiles.length === 0) {
                alert('No data to export! Generate some profiles first.');
                return;
            }
            exportJSON();
        }

        // Initialize on page load
        window.addEventListener('load', function() {
            updateStats();
            console.log('üîç OSINT Lab Modular Platform Loaded');
            console.log('Available endpoints will be generated after creating profiles');
            
            // Auto-generate sample data for demo
            generateDataSet();
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey) {
                switch(e.key) {
                    case 'G':
                        generateDataSet();
                        break;
                    case 'D':
                        showDebugInfo();
                        break;
                    case 'E':
                        exportJSON();
                        break;
                    case 'C':
                        clearAllData();
                        break;
                }
            }
        });

        // Mock API endpoints for scraping practice
        window.mockAPI = {
            getProfile: (id) => database.profiles.find(p => p.id === id),
            getAllProfiles: () => database.profiles,
            getCompany: (id) => database.companies.find(c => c.id === id),
            getEmployees: (companyName) => database.profiles.filter(p => p.company === companyName),
            searchProfiles: (query) => database.profiles.filter(p => 
                p.fullName.toLowerCase().includes(query.toLowerCase()) ||
                p.email.toLowerCase().includes(query.toLowerCase()) ||
                p.company.toLowerCase().includes(query.toLowerCase())
            )
        };

        // Expose debug functions globally
        window.debugOSINT = {
            showAll: () => console.log(database),
            exportDebug: () => exportJSON(),
            generateSample: () => generateDataSet(),
            clearData: () => clearAllData()
        };
    </script>
</body>
</html>